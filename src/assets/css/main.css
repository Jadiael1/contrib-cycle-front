@import url("https://fonts.googleapis.com/css2?family=B612:wght@400;700&family=B612+Mono:wght@400;700&display=swap");
@import "tailwindcss";

/* v3: darkMode: ["class"]  ->  v4: override do variant dark via seletor .dark */
@custom-variant dark (&:where(.dark, .dark *));

/* Tailwind v4 (CSS-first): mapeia seus tokens -> utilitários (bg-*, text-*, shadow-*, rounded-*, animate-*) */
@theme {
  /* Fonts */
  --font-sans: "B612", "Segoe UI", "Helvetica Neue", sans-serif;
  --font-mono: "B612 Mono", Consolas, "Courier New", monospace;

  /* Core space colors */
  --color-space-void: hsl(var(--space-void));
  --color-space-deep: hsl(var(--space-deep));
  --color-space-nebula: hsl(var(--space-nebula));
  --color-space-dust: hsl(var(--space-dust));

  /* Cosmic accents */
  --color-cosmic-blue: hsl(var(--cosmic-blue));
  --color-cosmic-cyan: hsl(var(--cosmic-cyan));
  --color-cosmic-purple: hsl(var(--cosmic-purple));
  --color-cosmic-pink: hsl(var(--cosmic-pink));
  --color-cosmic-gold: hsl(var(--cosmic-gold));
  --color-cosmic-orange: hsl(var(--cosmic-orange));

  /* Star colors */
  --color-star-white: hsl(var(--star-white));
  --color-star-dim: hsl(var(--star-dim));
  --color-star-muted: hsl(var(--star-muted));

  /* Semantic colors */
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-success: hsl(var(--success));
  --color-success-foreground: hsl(var(--success-foreground));

  --color-warning: hsl(var(--warning));
  --color-warning-foreground: hsl(var(--warning-foreground));

  /* Radius (rounded-sm/md/lg) */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Shadows (shadow-sm/md/lg + custom shadow-glow*) */
  --shadow-sm: 0 2px 8px hsl(0 0% 0% / 0.3);
  --shadow-md: 0 4px 16px hsl(0 0% 0% / 0.4);
  --shadow-lg: 0 8px 32px hsl(0 0% 0% / 0.5);
  --shadow-glow: 0 0 20px hsl(var(--cosmic-cyan) / 0.3);
  --shadow-glow-accent: 0 0 20px hsl(var(--cosmic-purple) / 0.3);

  /* Animations (animate-*) */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-float: float 3s ease-in-out infinite;
  --animate-pulse-glow: pulse-glow 2s ease-in-out infinite;
  --animate-fade-in: fade-in 0.3s ease-out forwards;
  --animate-slide-up: slide-up 0.4s ease-out forwards;
  --animate-scale-in: scale-in 0.2s ease-out forwards;
}

/* v3: transitionDuration.fast/normal/slow  ->  v4: \@\utility (vira “utility de verdade”, com variants) */
@utility duration-fast { transition-duration: var(--transition-fast); }
@utility duration-normal { transition-duration: var(--transition-normal); }
@utility duration-slow { transition-duration: var(--transition-slow); }

@layer base {
  :root {
    /* Core space palette - Deep space blacks and cosmic blues */
    --space-void: 230 25% 5%;
    --space-deep: 230 30% 8%;
    --space-nebula: 230 35% 12%;
    --space-dust: 225 25% 18%;

    /* Cosmic accent colors */
    --cosmic-blue: 210 100% 60%;
    --cosmic-cyan: 185 100% 50%;
    --cosmic-purple: 260 85% 65%;
    --cosmic-pink: 330 85% 60%;
    --cosmic-gold: 45 100% 60%;
    --cosmic-orange: 25 100% 55%;

    /* Star colors */
    --star-white: 210 30% 95%;
    --star-dim: 220 20% 70%;
    --star-muted: 220 15% 50%;

    /* Status colors */
    --status-success: 145 70% 45%;
    --status-warning: 35 95% 55%;
    --status-error: 0 75% 55%;
    --status-info: 200 90% 55%;

    /* Semantic tokens (HSL triplets) */
    --background: var(--space-void);
    --foreground: var(--star-white);

    --card: var(--space-nebula);
    --card-foreground: var(--star-white);

    --popover: var(--space-deep);
    --popover-foreground: var(--star-white);

    --primary: var(--cosmic-cyan);
    --primary-foreground: var(--space-void);

    --secondary: var(--space-dust);
    --secondary-foreground: var(--star-white);

    --muted: var(--space-nebula);
    --muted-foreground: var(--star-muted);

    --accent: var(--cosmic-purple);
    --accent-foreground: var(--star-white);

    --destructive: var(--status-error);
    --destructive-foreground: var(--star-white);

    --success: var(--status-success);
    --success-foreground: var(--space-void);

    --warning: var(--status-warning);
    --warning-foreground: var(--space-void);

    --border: 225 25% 20%;
    --input: 225 25% 15%;
    --ring: var(--cosmic-cyan);

    --radius: 0.75rem;

    /* Glass effect */
    --glass-bg: 230 30% 12% / 0.6;
    --glass-border: 210 30% 95% / 0.1;
    --glass-blur: 12px;

    /* Gradients */
    --gradient-space: linear-gradient(
      135deg,
      hsl(var(--space-void)) 0%,
      hsl(var(--space-deep)) 50%,
      hsl(var(--space-nebula)) 100%
    );
    --gradient-nebula: linear-gradient(
      135deg,
      hsl(var(--cosmic-purple) / 0.3) 0%,
      hsl(var(--cosmic-blue) / 0.2) 50%,
      hsl(var(--cosmic-cyan) / 0.3) 100%
    );
    --gradient-glow: radial-gradient(
      ellipse at center,
      hsl(var(--cosmic-cyan) / 0.15) 0%,
      transparent 70%
    );
    --gradient-card: linear-gradient(
      145deg,
      hsl(var(--space-nebula)) 0%,
      hsl(var(--space-dust) / 0.5) 100%
    );
    --gradient-btn-primary: linear-gradient(
      135deg,
      hsl(var(--cosmic-cyan)) 0%,
      hsl(var(--cosmic-blue)) 100%
    );
    --gradient-btn-accent: linear-gradient(
      135deg,
      hsl(var(--cosmic-purple)) 0%,
      hsl(var(--cosmic-pink)) 100%
    );

    /* Animation timings */
    --transition-fast: 150ms;
    --transition-normal: 250ms;
    --transition-slow: 400ms;
  }

  * { @apply border-border; }

  html {
    font-family: var(--font-sans);
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-background text-foreground min-h-screen;
    background: var(--gradient-space);
    background-attachment: fixed;
  }

  *:focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: hsl(var(--space-deep)); }
  ::-webkit-scrollbar-thumb { background: hsl(var(--space-dust)); border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: hsl(var(--star-muted)); }
}

@utility glass-card {
  background: hsl(var(--glass-bg));
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid hsl(var(--glass-border));
  box-shadow: var(--shadow-md);
}

@layer components {
  /* Cosmic glow effect */
  .cosmic-glow { position: relative; }

  .cosmic-glow::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(135deg, hsl(var(--cosmic-cyan) / 0.5), hsl(var(--cosmic-purple) / 0.5));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  /* Stars background effect */
  .stars-bg { position: relative; overflow: hidden; }

  .stars-bg::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image:
      radial-gradient(1px 1px at 20px 30px, hsl(var(--star-white)), transparent),
      radial-gradient(1px 1px at 40px 70px, hsl(var(--star-dim)), transparent),
      radial-gradient(1px 1px at 50px 160px, hsl(var(--star-white)), transparent),
      radial-gradient(1px 1px at 90px 40px, hsl(var(--star-dim)), transparent),
      radial-gradient(1px 1px at 130px 80px, hsl(var(--star-white)), transparent),
      radial-gradient(1.5px 1.5px at 160px 120px, hsl(var(--cosmic-cyan)), transparent),
      radial-gradient(1px 1px at 200px 50px, hsl(var(--star-white)), transparent);
    background-repeat: repeat;
    background-size: 220px 200px;
    opacity: 0.6;
    pointer-events: none;
    animation: twinkle 4s ease-in-out infinite alternate;
  }

  /* Nebula glow background */
  .nebula-glow { position: relative; }

  .nebula-glow::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 150%;
    height: 150%;
    transform: translate(-50%, -50%);
    background: var(--gradient-glow);
    pointer-events: none;
    z-index: -1;
  }

  /* Status badge variants */
  .badge-success { @apply bg-success/20 text-success border border-success/30; }
  .badge-warning { @apply bg-warning/20 text-warning border border-warning/30; }
  .badge-error { @apply bg-destructive/20 text-destructive border border-destructive/30; }
  .badge-info { @apply bg-primary/20 text-primary border border-primary/30; }

  /* Cockpit panel style */
  .cockpit-panel {
    @apply glass-card rounded-xl p-6;
    border-left: 3px solid hsl(var(--cosmic-cyan) / 0.5);
  }

  /* Data display */
  .data-display {
    @apply font-mono text-sm tracking-wide;
    color: hsl(var(--cosmic-cyan));
  }

  /* Loading skeleton with space theme */
  .skeleton-space {
    @apply animate-pulse rounded;
    background: linear-gradient(
      90deg,
      hsl(var(--space-nebula)) 0%,
      hsl(var(--space-dust)) 50%,
      hsl(var(--space-nebula)) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }
}

@layer utilities {
  /* v3: theme.container { center: true, padding: "1rem", screens: { ..., "2xl": "1400px" } } */
  .container {
    width: 100%;
    margin-inline: auto;
    padding-inline: 1rem;
  }

  @media (min-width: 640px) { .container { max-width: 640px; } }
  @media (min-width: 768px) { .container { max-width: 768px; } }
  @media (min-width: 1024px) { .container { max-width: 1024px; } }
  @media (min-width: 1280px) { .container { max-width: 1280px; } }

  /* breakpoint 2xl padrão ~1536px; container limita em 1400px como no seu v3 */
  @media (min-width: 1536px) { .container { max-width: 1400px; } }
}

/* Keyframes */
@keyframes twinkle {
  0% { opacity: 0.4; }
  100% { opacity: 0.7; }
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@keyframes accordion-down {
  from { height: 0; }
  to { height: var(--radix-accordion-content-height); }
}

@keyframes accordion-up {
  from { height: var(--radix-accordion-content-height); }
  to { height: 0; }
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 10px hsl(var(--cosmic-cyan) / 0.3); }
  50% { box-shadow: 0 0 25px hsl(var(--cosmic-cyan) / 0.6); }
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slide-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scale-in {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@utility custom-scrollbar {
  &::-webkit-scrollbar { width: 4px; }
  &::-webkit-scrollbar-track { background: transparent; }
  &::-webkit-scrollbar-thumb { 
    background: hsl(var(--space-dust)); 
    border-radius: 20px;
  }
  &::-webkit-scrollbar-thumb:hover { background: hsl(var(--cosmic-purple)); }
}